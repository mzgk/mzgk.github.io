<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[jubilee]]></title>
  <link href="http://mzgk.github.io/atom.xml" rel="self"/>
  <link href="http://mzgk.github.io/"/>
  <updated>2014-09-05T14:08:39+09:00</updated>
  <id>http://mzgk.github.io/</id>
  <author>
    <name><![CDATA[mzgk]]></name>
    <email><![CDATA[mzgkworks@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[TestFlight：2（プロビジョニングプロファイル〜アプリ配信）]]></title>
    <link href="http://mzgk.github.io/blog/2014/invite-testflight2/"/>
    <updated>2014-09-05T13:02:28+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/invite-testflight2</id>
    <content type="html"><![CDATA[<p>TestFlightにユーザーを招待する方法。<br/>
身近にユーザーがいて、端末のUDID登録等がすぐにできる場合は一緒に進められるが、
配布したいユーザーが近くにおらず、端末のUDIDを教えてもらうことができない場合の方法。</p>

<ul>
<li>招待したユーザーの端末のUDIDを追加</li>
<li>プロビジョニングプロファイルをアップロード</li>
<li>ユーザーに配信</li>
</ul>


<!-- more -->


<h2>管理者：iOS Developerにデバイス登録</h2>

<ol>
<li>招待したユーザーがTest Flightにサインアップし端末を登録すると、管理者にメールが届く</li>
<li>Apple Developer にログイン</li>
<li>Certificates, Identifiers &amp; Profiles &ndash;> iOS Apps &ndash;> Devices</li>
<li>右上の＋をクリック</li>
<li>Register DeviceでName:（任意）とUDIDを登録</li>
<li>Register Multiple Devicesでは、ファイルに書くことで一括登録が可能</li>
</ol>


<p><img src="http://mzgk.github.io/images/2014/0905/12_mail_added_a_device.png" title="メール受信" alt="add device" />
<img src="http://mzgk.github.io/images/2014/0905/13_ios_developer_device_add.png" title="デバイス登録" alt="add device" />
<img src="http://mzgk.github.io/images/2014/0905/14_register_device.png" title="デバイス登録" alt="add device" /></p>

<h2>管理者：プロビジョニングプロファイルの作成</h2>

<ol>
<li>Apple Developer にログイン</li>
<li>Certificates, Identifiers &amp; Profiles &ndash;> iOS Apps &ndash;> Provisioning Profiles</li>
<li>対象のアプリで使用するプロビジョニングプロファイルを選択し、Edit</li>
<li>端末を追加し、Generate &ndash;> Download</li>
</ol>


<p><img src="http://mzgk.github.io/images/2014/0905/15_edit_provisioning_profile.png" title="プロビジョニングプロファイル" alt="provisioning profile" />
<img src="http://mzgk.github.io/images/2014/0905/16_provisioning_download.png" title="ダウンロード" alt="provisioning profile" /></p>

<h2>管理者：Test Flightへアップロード</h2>

<p>アプリの内容に変更がないのであれば、プロビジョニングプロファイルのアップロードのみで可。</p>

<ol>
<li>Test Flightへログイン</li>
<li>Apps &ndash;> Manage Your Apps &ndash;> 対象のアプリをクリック</li>
<li>Builds &ndash;> アプリをクリック</li>
<li>Permission &ndash;> ダウンロードしたプロビジョニングプロファイルをアップロード</li>
</ol>


<p><img src="http://mzgk.github.io/images/2014/0905/17_testflight_apps.png" title="アプリ選択" alt="update" />
<img src="http://mzgk.github.io/images/2014/0905/18_builds.png" title="アプリ選択" alt="update" />
<img src="http://mzgk.github.io/images/2014/0905/19_permission.png" title="アップロード" alt="update" />
<img src="http://mzgk.github.io/images/2014/0905/20_profile_upload.png" title="アップロード" alt="update" /></p>

<h2>管理者：ユーザーにアプリ配信のメール</h2>

<ol>
<li>プロビジョニングプロファイルをアップロード</li>
<li>招待したユーザーの名前がTeammates in The Provisioning Profileに表示される</li>
<li>招待したユーザーにチェックをつけて、Update &amp; Notifyをクリックでメールが送信される</li>
</ol>


<p><img src="http://mzgk.github.io/images/2014/0905/21_uploaded.png" title="メール送信" alt="send mail" />
<img src="http://mzgk.github.io/images/2014/0905/22_status.png" title="ステータス" alt="status" /></p>

<h2>ユーザー：アプリのインストール</h2>

<p>操作は <em>Safari</em> で行うこと。</p>

<ol>
<li>管理者からメールが届く</li>
<li>届いたメールのINSTALLをクリック</li>
<li>端末にプロビジョニングプロファイルがインストールされ、アプリもインストールされる
<img src="http://mzgk.github.io/images/2014/0905/23_user_install_mail.png" title="インストールメール" alt="mail" />
<img src="http://mzgk.github.io/images/2014/0905/24_profile.png" title="プロビジョニングプロファイル" alt="profile" /></li>
</ol>


<h2>管理者：確認</h2>

<ol>
<li>Test Flight上で、ユーザーがインストールしたかどうかの確認ができる
<img src="http://mzgk.github.io/images/2014/0905/25_activity.png" title="ステータスの確認" alt="status" /></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[TestFlight：1（ユーザーを招待する）]]></title>
    <link href="http://mzgk.github.io/blog/2014/invite-to-testflight/"/>
    <updated>2014-09-05T10:54:38+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/invite-to-testflight</id>
    <content type="html"><![CDATA[<p>TestFlightにユーザーを招待する方法。<br/>
身近にユーザーがいて、端末のUDID登録等がすぐにできる場合は一緒に進められるが、
配布したいユーザーが近くにおらず、端末のUDIDを教えてもらうことができない場合の方法。<br/>
まずは、ユーザーの招待まで。</p>

<!-- more -->


<h2>管理者</h2>

<ol>
<li>管理者は、ブラウザを起動しTestFlightにログインする</li>
<li>Invite Peopleから招待状を送付する</li>
</ol>


<p><img src="http://mzgk.github.io/images/2014/0905/1_invite_%20people.png" title="招待" alt="invite_people1" />
<img src="http://mzgk.github.io/images/2014/0905/2_invite_a_teammate.png" title="メールの送付" alt="invite_people2" />
<img src="http://mzgk.github.io/images/2014/0905/3_manage_invites_in.png" title="ステータス" alt="invite_people3" /></p>

<h2>招待を受けたユーザー</h2>

<p>操作は <em>テストに使う端末</em> で行う。<br/>
操作は <em>Safari</em> でやらないとエラーになる（chrome等はダメ）。<br/>
gmail.appで受けてchromeが開いた場合は、アドレスをコピー &ndash;> safariで開いて操作<br/>
safariも <em>プライベートブラウジングはオフ</em> にしておくこと</p>

<ol>
<li>ユーザーにメールが届く</li>
<li>メールのAcceptをタップ</li>
<li>ユーザーの情報を入力し、Sign Up</li>
<li>デバイスの登録を行う</li>
<li>プロファイルのインストールを促されるのでインストール</li>
<li>管理者からアプリインストールのメールがくるのを待つ</li>
<li>プロファイルの確認は、設定アプリ起動 &ndash;> 一般 &ndash;> プロファイルで確認できる</li>
</ol>


<p><img src="http://mzgk.github.io/images/2014/0905/4_user_mail.png" title="メール受信" alt="user_signup" />
<img src="http://mzgk.github.io/images/2014/0905/5_user_sign_up.png" title="Sign Up" alt="user_signup" />
<img src="http://mzgk.github.io/images/2014/0905/7_user_connect_your_device.png" title="デバイス登録" alt="user_signup" />
<img src="http://mzgk.github.io/images/2014/0905/8_profile_install.png" title="インストール" alt="user_signup" />
<img src="http://mzgk.github.io/images/2014/0905/9_profile_installed.png" title="インストール完了" alt="user_signup" />
<img src="http://mzgk.github.io/images/2014/0905/10_view_all_apps.png" title="アプリインストール待ち" alt="user_signup" />
<img src="http://mzgk.github.io/images/2014/0905/11_setting_profile.png" title="プロファイルの確認" alt="user_signup" /></p>

<h2>管理者</h2>

<p>ユーザーがSign Upしたかどうかは、この画面で確認できる。</p>

<p><img src="http://mzgk.github.io/images/2014/0905/6_manage_invites_in.png" title="Status" alt="user_signup" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[XcodeのCtrl＋ドラッグとBetterTouch Tool]]></title>
    <link href="http://mzgk.github.io/blog/2014/xcode-bettertouchtool/"/>
    <updated>2014-09-02T19:14:18+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/xcode-bettertouchtool</id>
    <content type="html"><![CDATA[<p>BetterTouch Toolの設定を変更したら、XcodeでUI部品のコントロール＋ドラッグ接続が効かなくなった。<br/>
その対処法。ちなみに原因は不明。</p>

<h3>環境</h3>

<ul>
<li>OS X : 10.9.4</li>
<li>Xcode : 5.1.1</li>
<li>BetterTouch Tool : 0.9977</li>
</ul>


<h3>経緯</h3>

<ul>
<li>BetterTouch Toolで、ChromeとSafariに以下のジェスチャーを設定</li>
<li>Two Finger Tap Tip Right / Left：タブの移動</li>
<li>三本指のうち二本指をトラックパッドに置いた状態で、一本指でタップで表示するタブを移動</li>
</ul>


<h3>解決方法</h3>

<p>XCodeではBetterTouch Toolを使用していないので、XCodeを使用中はBTTが無視するように設定。</p>

<ul>
<li>XCodeを起動（アクティブ状態）</li>
<li>メニューバー &ndash;> BetterTouch Toolのアイコン &ndash;> Disable BTT For Current Appをクリック</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[UITextFieldでキーボード閉じる方法３つ]]></title>
    <link href="http://mzgk.github.io/blog/2014/textfield-hide-keyboard/"/>
    <updated>2014-09-02T18:08:54+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/textfield-hide-keyboard</id>
    <content type="html"><![CDATA[<p>UITextFieldで、表示されているキーボードを閉じる方法のまとめ。<br/>
パターン的には３つ。</p>

<ol>
<li>UITextFieldのアクションを使用（リターンキーで閉じる）</li>
<li>UITextFieldのデリゲートを使用（リターンキーで閉じる）</li>
<li>Tap Gestureを使用（他の場所をタップで閉じる）</li>
</ol>


<!-- more -->


<h2>UITextFieldのアクションを使用（リターンキーで閉じる）</h2>

<p>StoryBoardを使った、一番お手軽なパターン。<br/>
キーボードのリターンキーで、キーボードが閉じる。</p>

<ul>
<li>StoryBoard上でUITextFieldを右クリック</li>
<li>Sent Events &ndash;> Did End On Exitを選択</li>
<li>Ctrl + ドラッグでアクション接続</li>
<li>IBActionのメソッド内に処理は不要</li>
</ul>


<h2>UITextFieldのアクションを使用（リターンキーで閉じる）</h2>

<p>よく見かけるパターン。<br/>
キーボードのリターンキーで、キーボードが閉じる。</p>

<ul>
<li><UITextFieldDelegate>プロトコルを接続（.hの@interface部分）</li>
<li>.mにデリゲートメソッドを追加</li>
<li>処理を記述</li>
</ul>


<figure class='code'><figcaption><span>ViewController.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">@interface</span> <span class="nc">ViewController</span> : <span class="nc">UIViewController</span><span class="o">&lt;</span><span class="n">UITextFieldDelegate</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>ViewController.m</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">super</span> <span class="n">viewDidLoad</span><span class="p">];</span>
</span><span class='line'>    <span class="c1">// デリゲートを設定</span>
</span><span class='line'>    <span class="n">_textField</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="n">self</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">textFieldShouldReturn:</span><span class="p">(</span><span class="n">UITextField</span> <span class="o">*</span><span class="p">)</span><span class="nv">textField</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="c1">// これか</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="nl">endEditing:</span><span class="n">YES</span><span class="p">];</span>
</span><span class='line'>    <span class="c1">// これ</span>
</span><span class='line'>    <span class="p">[</span><span class="n">_textField</span> <span class="n">resignFirstResponder</span><span class="p">];</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">YES</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Tap Gestureを使用（他の場所をタップで閉じる）</h2>

<p>キーボードのリターンキーではなく、他の場所をタップした際にキーボードを閉じる。</p>

<ul>
<li>StoryBoard上で、ViewControllerに Tap GestureRecognizer を追加</li>
<li>Ctrl + ドラッグでアクション接続</li>
<li>処理を記述</li>
</ul>


<figure class='code'><figcaption><span>ViewController.m</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">IBAction</span><span class="p">)</span><span class="nf">onTapView:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">sender</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="c1">// これか</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="nl">endEditing:</span><span class="n">YES</span><span class="p">];</span>
</span><span class='line'>    <span class="c1">// こんな感じ</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">([</span><span class="n">_textField</span> <span class="n">isFirstResponder</span><span class="p">])</span> <span class="p">{</span>
</span><span class='line'>        <span class="p">[</span><span class="n">_textField</span> <span class="n">resignFirstResponder</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[文字列の大小比較]]></title>
    <link href="http://mzgk.github.io/blog/2014/string-compare/"/>
    <updated>2014-09-01T19:14:57+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/string-compare</id>
    <content type="html"><![CDATA[<p>文字列を大小比較する場合は、以下を使用する。</p>

<figure class='code'><figcaption><span>文字列の大小比較</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">NSComparisonResult</span> <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="err">比較元</span> <span class="nl">compare:</span><span class="err">比較相手</span><span class="p">];</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="n">NSOrderedAscending</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="err">結果：元　＜　相手：</span><span class="o">-</span><span class="mi">1</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="n">NSOrderedSame</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="err">結果：元　＝　相手：</span><span class="mi">0</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="n">NSOrderedDescending</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="err">結果：元　＞　相手：</span><span class="mi">1</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>単純に等しいかどうかの判断であれば <code>isEqualToString:</code> を使用。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[NSLog()を記述せずに、ブレークポイントでログを出力する方法]]></title>
    <link href="http://mzgk.github.io/blog/2014/breakpoint-automessage/"/>
    <updated>2014-08-29T15:26:02+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/breakpoint-automessage</id>
    <content type="html"><![CDATA[<p>ちょっとした確認をしたいときや、NSLog()を残したくない場合などに、ブレークポイントを使ってコンソールにログを出力する方法。<br/>
Xcodeのブレークポイントの設定だけで、停止せずにログを出力できる。</p>

<!-- more -->


<h2>ブレークポイント</h2>

<ul>
<li>ブレークポイントを設定</li>
<li>右クリック &ndash;> Edit Breakpoint&hellip;</li>
<li>Action &ndash;> Log Message</li>
<li>入力欄に出力したい文言を記述</li>
<li>変数の値を出力したい場合は、@変数名@</li>
<li>Options &ndash;> Automatically〜にチェックを入れると止まらずにコンソールに出力する</li>
</ul>


<p><img src="http://mzgk.github.io/images/2014/0829/breakpoint.png" alt="設定方法" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[NSLog()のリリース時停止漏れを防ぐマクロ]]></title>
    <link href="http://mzgk.github.io/blog/2014/nslog-macro/"/>
    <updated>2014-08-29T15:03:40+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/nslog-macro</id>
    <content type="html"><![CDATA[<p>リリース時にNSLog()が仕込まれたままの状態を防ぐ。<br/>
デバッグ時のみ、ログ出力（関数名・行番号をつけて）を行う。</p>

<!-- more -->


<h2>アプリ名-prefix.pch</h2>

<p>アプリ名-prefix.pchに以下を記載する。</p>

<figure class='code'><figcaption><span>アプリ名-prefix.pch</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="cp">#ifdef DEBUG</span>
</span><span class='line'><span class="cp">#define dLog(fmt, ...) NSLog((@&quot;%s [Line %d] &quot; fmt), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__);</span>
</span><span class='line'><span class="cp">#else</span>
</span><span class='line'><span class="cp">#define dLog(...)</span>
</span><span class='line'><span class="cp">#endif</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// ALog always displays output regardless of the DEBUG alarm</span>
</span><span class='line'><span class="cp">#define aLog(fmt, ...) NSLog((@&quot;%s [Line %d] &quot; fmt), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__);</span>
</span></code></pre></td></tr></table></div></figure>


<h2>使用方法</h2>

<ul>
<li>dLog(@“TEST!”);　→　デバッグ時のみNSLogで出力（[関数名] [Line 25] TEST!）</li>
<li>dLog();　→　これも可（[関数名] [Line 25]）</li>
<li>aLog();　→　デバッグ・リリースに関係なく出力される。</li>
</ul>


<h2>参考</h2>

<p><a href="http://d.hatena.ne.jp/k2_k_hei/20120511/1336750473">http://d.hatena.ne.jp/k2_k_hei/20120511/1336750473</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[プロパティやインスタンス変数を宣言する場所]]></title>
    <link href="http://mzgk.github.io/blog/2014/property-place/"/>
    <updated>2014-08-29T14:56:41+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/property-place</id>
    <content type="html"><![CDATA[<p>記述方法は３つある。<br/>
見やすさから言えばヘッダーファイルにあるといいが、ドキュメントを読むと2. 3. が推奨されているっぽい。</p>

<ol>
<li>ヘッダーファイル</li>
<li>実装ファイル：クラスエクステンション内</li>
<li>実装ファイル：@implementation</li>
</ol>


<!-- more -->


<h2>1. ヘッダーファイル</h2>

<p>ヘッダー内に記述する。とくにグローバルでなければ非推奨。</p>

<figure class='code'><figcaption><span>sampleClass.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">@interface</span> <span class="nc">SampleClass</span> : <span class="nc">NSObject</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>2. 実装ファイル：クラスエクステンション内</h2>

<p>実装ファイルにクラスエクステンションを作成し、そこに記述。</p>

<figure class='code'><figcaption><span>sampleClass.m</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">@interface</span> <span class="nc">SampleClass</span> <span class="p">()</span>
</span><span class='line'><span class="c1">// クラスエクステンション内に記述する</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
</span><span class='line'><span class="k">@end</span>
</span><span class='line'>
</span><span class='line'><span class="k">@implementation</span> <span class="nc">SampleClass</span>
</span><span class='line'><span class="k">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">init</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="err">メソッドの実装</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<h2>3. 実装ファイル：@implementation</h2>

<p>@implementation内に{}を記述し、その中に書く。</p>

<figure class='code'><figcaption><span>sampleClass.m</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">@implementation</span> <span class="nc">SampleClass</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="c1">// {}を記述し、その中に記述する</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// メソッドの実装</span>
</span><span class='line'><span class="o">+</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">init</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Homebrewでgitをインストールする]]></title>
    <link href="http://mzgk.github.io/blog/2014/install-git-by-homebrew/"/>
    <updated>2014-08-29T13:35:54+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/install-git-by-homebrew</id>
    <content type="html"><![CDATA[<p>Homebrewで最新のgitをインストールする。</p>

<!-- more -->


<h2>環境</h2>

<ul>
<li>OS X 10.9.2</li>
<li>Homebrewインストール済み</li>
<li>Macのデフォルトgit version 1.8.5.2(Apple Git-48)</li>
</ul>


<h2>gitをインストール</h2>

<figure class='code'><figcaption><span>Terminal.app</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>// Terminalを起動し、現在のgit versionを確認
</span><span class='line'><span class="nv">$ </span>git --version
</span><span class='line'>git version 1.8.5.2<span class="o">(</span>Apple Git-48<span class="o">)</span>
</span><span class='line'>
</span><span class='line'>// Homebrewで最新をインストールする
</span><span class='line'><span class="nv">$ </span>brew install git
</span><span class='line'>...
</span><span class='line'><span class="o">==</span>&gt; Summary
</span><span class='line'>/usr/local/Cellar/git/1.9.2: 1324 files, 31M
</span><span class='line'>
</span><span class='line'>// インストールしたバージョンを確認
</span><span class='line'><span class="nv">$ </span>/usr/local/bin/git --version
</span><span class='line'>git version 1.9.2
</span></code></pre></td></tr></table></div></figure>


<h2>Homebrewでインストールしたgitを使用する</h2>

<p>Homebrewでインストールしたgitを使用するように設定する。<br/>
/etc/pathsの順番で、/usr/local/binが一番上にくるようにする。</p>

<figure class='code'><figcaption><span>Terminal.app</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>vi /etc/paths
</span><span class='line'>↓
</span><span class='line'>/usr/local/bin
</span><span class='line'>/usr/bin
</span><span class='line'>/bin
</span><span class='line'>/usr/sbin
</span><span class='line'>/sbin
</span></code></pre></td></tr></table></div></figure>


<h2>バージョンを確認する</h2>

<p>切り替わったかを確認する。</p>

<figure class='code'><figcaption><span>Terminal.app</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git --version
</span><span class='line'>git version 1.9.2
</span></code></pre></td></tr></table></div></figure>


<h2>参考</h2>

<p><a href="http://blog.glidenote.com/blog/2014/04/20/change-command-path-priority/">http://blog.glidenote.com/blog/2014/04/20/change-command-path-priority/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Homebrewのインストール]]></title>
    <link href="http://mzgk.github.io/blog/2014/install-homebrew/"/>
    <updated>2014-08-29T11:12:35+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/install-homebrew</id>
    <content type="html"><![CDATA[<p>Macのパッケージ管理にHomebrewを使用しているので、そのインストール方法。</p>

<!-- more -->


<h2>環境</h2>

<ul>
<li>OS X 10.9.2</li>
<li>Commandline toolインストール済み</li>
<li>インストールディレクトリの存在確認</li>
</ul>


<h2>インストールディレクトリの確認</h2>

<p>Terminal.appを起動し確認。</p>

<figure class='code'><figcaption><span>Terminal.app</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>// /usr/localが存在するかどうか？
</span><span class='line'><span class="nv">$ </span>ls /usr/local
</span><span class='line'>
</span><span class='line'>// 存在した
</span><span class='line'>lib
</span><span class='line'>
</span><span class='line'>// なければ作成する
</span><span class='line'><span class="nv">$ </span>sudo makdir /usr/local
</span></code></pre></td></tr></table></div></figure>


<h2>インストール</h2>

<p><a href="http://brew.sh/index_ja.html">公式サイト</a>を表示。<br/>
「Homebrewのインストール」部分に書いてあるスクリプトをコピー<br/>
Terminalを起動し、ペースト</p>

<figure class='code'><figcaption><span>Terminal.app</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'> このスクリプトは必ずサイトから入手すること
</span><span class='line'><span class="nv">$ </span>ruby -e <span class="s2">&quot;$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)&quot;</span>
</span><span class='line'>...
</span><span class='line'><span class="o">==</span>&gt; Installation successful!
</span><span class='line'>You should run <span class="sb">`</span>brew doctor<span class="err">&#39;</span> *before* you install anything.
</span><span class='line'>Now <span class="nb">type</span>: brew <span class="nb">help</span>
</span></code></pre></td></tr></table></div></figure>


<h2>インストール後の確認</h2>

<p>正しくインストールされたか確認を行う。</p>

<figure class='code'><figcaption><span>Terminal.app</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>brew doctor
</span><span class='line'>
</span><span class='line'>// 以下のようなWarningが表示された。
</span><span class='line'>Warning: Unbrewed dylibs were found in /usr/local/lib.
</span><span class='line'>If you didn<span class="err">&#39;</span>t put them there on purpose they could cause problems when
</span><span class='line'>building Homebrew formulae, and may need to be deleted.
</span><span class='line'>
</span><span class='line'>Unexpected dylibs:
</span><span class='line'>    /usr/local/lib/libecomlodr.dylib
</span><span class='line'>
</span><span class='line'>// 余分なファイルだから削除しろとのこと。念のため、何のファイルかgoogleで検索してみると、Symantecのセキュリティソフトに絡んでいそう。
</span><span class='line'>/usr/localも既に作成されていたことを考えると削除しないで、しばらく様子をみる。
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[AppID・証明書の作成方法（Push通知あり）]]></title>
    <link href="http://mzgk.github.io/blog/2014/make-appid-certificate-for-pushnotification/"/>
    <updated>2014-08-28T16:42:34+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/make-appid-certificate-for-pushnotification</id>
    <content type="html"><![CDATA[<p>作成しているアプリ用に、App ID・証明書等の作成が必要になったので手順のメモ。<br/>
Push通知ありのアプリ。以下で作業が必要になる。</p>

<ul>
<li>Web（Safari &ndash;> iOS Developer Center）</li>
<li>Mac（キーチェーン・ターミナル）</li>
</ul>


<!-- more -->


<h2>App IDの作成（Web）</h2>

<ul>
<li>Safari &ndash;> iOS Developer Centerにアクセス</li>
<li>Certificates, Identifiers &amp; Profiles</li>
<li>iOS Apps</li>
<li>Identifiers &ndash;> App IDs</li>
<li>＋ボタンで作成開始</li>
<li>App ID Description

<ul>
<li>Name: 名前を入れる（判別しやすいように）</li>
</ul>
</li>
<li>App ID Prefix

<ul>
<li>Value: 自動生成されている（入力不可）</li>
</ul>
</li>
<li>App ID Suffix

<ul>
<li>Explicit App ID</li>
<li>Bundle ID: jp.co.ast-net.アプリ名（小文字）</li>
</ul>
</li>
<li>App Services

<ul>
<li>使用するものにチェックを入れる（今回はPush Notifications）</li>
</ul>
</li>
</ul>


<h2>証明書の作成（Mac）</h2>

<ul>
<li>キーチェーンアクセス.appを起動</li>
<li>メニューから、キーチェーンアクセス &ndash;> 証明書アシスタント &ndash;> 認証局に証明書を要求</li>
<li>入力欄

<ul>
<li>メールアドレス：入力</li>
<li>通称：入力</li>
<li>CAのメールアドレス：未入力</li>
</ul>
</li>
<li>チェック欄

<ul>
<li>ディスクに保存</li>
<li>鍵ペア情報を指定</li>
</ul>
</li>
<li>作成される「CertificateSigningRequest.certSigningRequest」（CSR）を任意の場所に保存</li>
<li>鍵サイズ：2048</li>
<li>アルゴリズム：RSA</li>
</ul>


<h2>App IDと証明書の設定（Web）</h2>

<ul>
<li>ここからは開発用（Development）と製品用（Distribution）の２回作業が必要</li>
<li>Safari &ndash;> iOS Developer Centerにアクセス</li>
<li>Certificates, Identifiers &amp; Profiles</li>
<li>iOS Apps</li>
<li>Identifiers &ndash;> App IDs</li>
<li>先ほど作成したApp IDを選択 &ndash;> Edit（Push Notificationsが黄色になっている）</li>
<li>Push Notificationsの「Development SSL Certificate &ndash;> Create Certificate&hellip;」をクリック</li>
<li>Continueをクリック</li>
<li>Chose File&hellip; で、作成した証明書（CSR）を選択</li>
<li>Generateをクリック</li>
<li>作成されたら、Downloadをクリックしダウンロードする</li>
<li>aps_development.cer（aps_production.cer）がダウンロードされる</li>
<li>Certificates &ndash;> Allには設定した分が増えている（Name: Bundle ID）</li>
</ul>


<h2>証明書の書き出し（Mac）</h2>

<ul>
<li>ダウンロードしたファイル（aps_development.cer）をダブルクリックして、キーチェーンに登録する</li>
<li>キーチェーン.appを起動</li>
<li>Apple Development IOS Push Services: Bundle IDが登録されているので選択し、右クリック</li>
<li>&ldquo;Apple Development IOS Push Services: Bundle ID&#8221;を書き出すをクリック</li>
<li>名前をつけて、任意の場所に保存。フォーマット：個人情報交換（.p12）</li>
<li>パスワードを作成</li>
</ul>


<h2>証明書の変換（Mac）</h2>

<ul>
<li>ターミナルを起動</li>
<li>ファイルのあるディレクトリに移動</li>
<li>コマンドを入力し、パスワードを入力</li>
<li>終了すると、証明書の名前.pemが作成される</li>
<li>作成された.pemファイルを通知処理を行うサーバーに置いておく</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>// 入力
</span><span class='line'><span class="nv">$ </span>openssl pkcs12 -in 証明書の名前.p12 -out 証明書の名前（p12と別でも可）.pem -nodes -clcerts
</span><span class='line'>// 聞かれる
</span><span class='line'>Enter Import Password: 証明書の書き出しで作成したパスワード
</span><span class='line'>// 完了
</span><span class='line'>MAC Verified OK
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[.gitignoreをあとから適用する]]></title>
    <link href="http://mzgk.github.io/blog/2014/gitignore-apply-after-add/"/>
    <updated>2014-08-28T10:44:36+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/gitignore-apply-after-add</id>
    <content type="html"><![CDATA[<p>.gitignoreファイルはgit管理対象外とするディレクトリ・ファイルを登録するファイルだが、すでに管理対象として登録されたものに対しては無視される。<br/>
すでに管理対象となっているものを、後から.gitginoreに登録し適用させる方法。</p>

<h2>例：draftsディレクトリを対象外としたい</h2>

<p>下書きディレクトリとして <code>draftsディレクトリ</code> を管理対象としていたが、DropBoxで運用したいのでGit管理からは外したい。</p>

<h3>.gitignoreに追記</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># ディレクトリの最後に「/（スラッシュ）」をつける
</span><span class='line'>drafts/</span></code></pre></td></tr></table></div></figure>


<h3>ターミナル</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>// --cachedをつけることで、ファイル自体はローカルから削除しない
</span><span class='line'>$ git rm --cached -r drafts/
</span><span class='line'>
</span><span class='line'>// ちなみにファイルの場合は以下
</span><span class='line'>$ git rm --cached A.txt
</span><span class='line'>
</span><span class='line'>// ローカルからファイルも削除する場合は以下
</span><span class='line'>$ git rm A.txt</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Git コミットのメッセージ書き方]]></title>
    <link href="http://mzgk.github.io/blog/2014/git-commit-message/"/>
    <updated>2014-08-28T09:51:50+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/git-commit-message</id>
    <content type="html"><![CDATA[<p>Gitではコミットメッセージの形式に関して制約はないが、標準的な形式は以下となる。</p>

<ul>
<li>１行目にコミットの全体的説明を５０字以内で記述</li>
<li>２行目は空行</li>
<li>３行目以降に変更内容の詳細を記述</li>
<li>現在形で記述</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Change the message displayed by hello.py
</span><span class='line'>
</span><span class='line'>- Update the sayHello() function to output the user's name
</span><span class='line'>- Change the sayGoodbye() function to a friendlier message</span></code></pre></td></tr></table></div></figure>


<h3>参考</h3>

<p><a href="https://www.atlassian.com/ja/git/tutorial/git-basics#!commit">https://www.atlassian.com/ja/git/tutorial/git-basics#!commit</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ディレクトリ内を検索し、対象の文字列を含むディレクトリ・ファイルを削除]]></title>
    <link href="http://mzgk.github.io/blog/2014/search-and-delete/"/>
    <updated>2014-08-26T17:01:43+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/search-and-delete</id>
    <content type="html"><![CDATA[<p>~/tmpディレクトリ内に存在する「capture」の文字列を含むディレクトリ・ファイルを削除したい。<br/>
ワイルドカードが使えないみたいなので、以下で対応。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">deleteTmpCaptureDir</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">NSFileManager</span> <span class="o">*</span><span class="n">manager</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSFileManager</span> <span class="n">defaultManager</span><span class="p">];</span>
</span><span class='line'>    <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'>    <span class="c1">// ~/tmpディレクトリの取得</span>
</span><span class='line'>    <span class="n">NSString</span> <span class="o">*</span><span class="n">tmpDir</span> <span class="o">=</span> <span class="n">NSTemporaryDirectory</span><span class="p">();</span>
</span><span class='line'>    <span class="c1">// tmpディレクトリ内の一覧取得</span>
</span><span class='line'>    <span class="n">NSArray</span> <span class="o">*</span><span class="n">list</span> <span class="o">=</span> <span class="p">[</span><span class="n">manager</span> <span class="nl">contentsOfDirectoryAtPath:</span><span class="n">tmpDir</span> <span class="nl">error:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">];</span>
</span><span class='line'>    <span class="c1">// 一覧の中から「capture」を含むディレクトリ・ファイルを検索</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="n">path</span> <span class="k">in</span> <span class="n">list</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">NSRange</span> <span class="n">range</span> <span class="o">=</span> <span class="p">[</span><span class="n">path</span> <span class="nl">rangeOfString:</span><span class="s">@&quot;capture&quot;</span><span class="p">];</span>
</span><span class='line'>        <span class="c1">// 存在したならば削除</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">NSNotFound</span> <span class="o">!=</span> <span class="n">range</span><span class="p">.</span><span class="n">location</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="n">NSString</span> <span class="o">*</span><span class="n">target</span> <span class="o">=</span> <span class="p">[</span><span class="n">tmpDir</span> <span class="nl">stringByAppendingPathComponent:</span><span class="n">path</span><span class="p">];</span>
</span><span class='line'>            <span class="p">[</span><span class="n">manager</span> <span class="nl">removeItemAtPath:</span><span class="n">target</span> <span class="nl">error:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">];</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[１つの画面の上下で同じViewControllerを使う方法（addChildViewController）]]></title>
    <link href="http://mzgk.github.io/blog/2014/addchiledviewcontroller/"/>
    <updated>2014-08-22T18:18:14+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/addchiledviewcontroller</id>
    <content type="html"><![CDATA[<ul>
<li>１つの画面（A-ViewController）の上下にImageViewとスライダーを表示し、 同じ処理をさせる必要があった</li>
<li>画面上に２つずつUIImageViewとUISliderを配置して制御してもいいけど、同じことするのは面倒</li>
<li>同じ処理なので１つのViewController（UIImageViewとUISliderを持った）を作成（MovieVCとする）</li>
<li>大元の画面（A-ViewController）で、上下に作成したMovieVCを呼べばいいのでは？</li>
<li>Container ViewController？</li>
</ul>


<!-- more -->


<p>テスト用にMovieViewはWebを表示するようにして、作成してみた。こんな感じ。<br/>
<img src="http://mzgk.github.io/images/2014/0822/image.png" alt="image" /></p>

<p>StoryBoardは、こんな感じで設定。<br/>
<img src="http://mzgk.github.io/images/2014/0822/storyboard.png" alt="image" /></p>

<h2>大元の画面（A-ViewController）</h2>

<p>.m</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// MovieVCをインポート</span>
</span><span class='line'><span class="cp">#import &quot;MovieViewController.h&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@interface</span> <span class="nc">DetailViewController</span> <span class="p">()</span>
</span><span class='line'><span class="c1">// 画面の上下にUIViewを配置して接続</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">weak</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">UIView</span> <span class="o">*</span><span class="n">upperView</span><span class="p">;</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">weak</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">UIView</span> <span class="o">*</span><span class="n">lowerView</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// MovieVCのプロパティを用意</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">MovieViewController</span> <span class="o">*</span><span class="n">upperMovieVC</span><span class="p">;</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">MovieViewController</span> <span class="o">*</span><span class="n">lowerMovieVC</span><span class="p">;</span>
</span><span class='line'><span class="k">@end</span>
</span><span class='line'>
</span><span class='line'><span class="k">@implementation</span> <span class="nc">DetailViewController</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">super</span> <span class="n">viewDidLoad</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// MovieVCのインスタンスを生成（[MovieViewController new]ではダメ）</span>
</span><span class='line'>    <span class="n">_upperMovieVC</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">storyboard</span> <span class="nl">instantiateViewControllerWithIdentifier:</span><span class="s">@&quot;MovieScene&quot;</span><span class="p">];</span>
</span><span class='line'>    <span class="n">_lowerMovieVC</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">storyboard</span> <span class="nl">instantiateViewControllerWithIdentifier:</span><span class="s">@&quot;MovieScene&quot;</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 自身のVCの子とする</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span> <span class="nl">addChildViewController:</span><span class="n">_upperMovieVC</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span> <span class="nl">addChildViewController:</span><span class="n">_lowerMovieVC</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 用意してあるUIViewに生成した子（MovieVC）のviewを追加</span>
</span><span class='line'>    <span class="p">[</span><span class="n">_upperView</span> <span class="nl">addSubview:</span><span class="n">_upperMovieVC</span><span class="p">.</span><span class="n">view</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">_lowerView</span> <span class="nl">addSubview:</span><span class="n">_lowerMovieVC</span><span class="p">.</span><span class="n">view</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 子に追加した旨を通知</span>
</span><span class='line'>    <span class="p">[</span><span class="n">_upperMovieVC</span> <span class="nl">didMoveToParentViewController:</span><span class="n">self</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">_lowerMovieVC</span> <span class="nl">didMoveToParentViewController:</span><span class="n">self</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// テストのために用意したMovieVCのメソッドに違うURLを渡す</span>
</span><span class='line'>    <span class="p">[</span><span class="n">_upperMovieVC</span> <span class="nl">connectURL:</span><span class="s">@&quot;http://google.co.jp&quot;</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">_lowerMovieVC</span> <span class="nl">connectURL:</span><span class="s">@&quot;http://yahoo.co.jp&quot;</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<h2>MovieVC</h2>

<p>.h</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">@interface</span> <span class="nc">MovieViewController</span> : <span class="nc">UIViewController</span><span class="o">&lt;</span><span class="n">UIWebViewDelegate</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">connectURL:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">urlString</span><span class="p">;</span>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<p>.m</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">super</span> <span class="n">viewDidLoad</span><span class="p">];</span>
</span><span class='line'>    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;MovieView viewDidLoad&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">connectURL:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">urlString</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">NSURL</span> <span class="o">*</span><span class="n">url</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURL</span> <span class="nl">URLWithString:</span><span class="n">urlString</span><span class="p">];</span>
</span><span class='line'>    <span class="n">NSURLRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSURLRequest</span> <span class="nl">requestWithURL:</span><span class="n">url</span><span class="p">];</span>
</span><span class='line'>    <span class="n">_webView</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="n">self</span><span class="p">;</span>
</span><span class='line'>    <span class="p">[</span><span class="n">_webView</span> <span class="nl">loadRequest:</span><span class="n">request</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">willMoveToParentViewController:</span><span class="p">(</span><span class="n">UIViewController</span> <span class="o">*</span><span class="p">)</span><span class="nv">parent</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;MovieVC&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[UIActionSheetでタップされたボタンのタイトルを取得する]]></title>
    <link href="http://mzgk.github.io/blog/2014/uiactionsheet-tapped-buttontitle/"/>
    <updated>2014-08-22T13:52:26+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/uiactionsheet-tapped-buttontitle</id>
    <content type="html"><![CDATA[<p>UIActionSheetで、タップされたボタンのタイトルを取得する方法。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">actionSheet:</span><span class="p">(</span><span class="n">UIActionSheet</span> <span class="o">*</span><span class="p">)</span><span class="nv">actionSheet</span> <span class="nf">clickedButtonAtIndex:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">buttonIndex</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="c1">// キャンルボタンかどうかの判断（おまけ）</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">buttonIndex</span> <span class="o">!=</span> <span class="n">actionSheet</span><span class="p">.</span><span class="n">cancelButtonIndex</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">// タップされたボタンのタイトルを取得</span>
</span><span class='line'>        <span class="n">_label</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="p">[</span><span class="n">actionSheet</span> <span class="nl">buttonTitleAtIndex:</span><span class="n">buttonIndex</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CoreDataのマイグレーション（その１）]]></title>
    <link href="http://mzgk.github.io/blog/2014/coredata-migration/"/>
    <updated>2014-08-22T13:35:20+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/coredata-migration</id>
    <content type="html"><![CDATA[<p>CoreDataを使ったアプリで、リリース後にエンティティに属性を追加したい場合の対応方法。<br/>
もちろん、今のデータを保持したままマイグレーションさせるのが前提。</p>

<ul>
<li>MagicalRecord使用済み</li>
<li>アプリリリース後にエンティティに属性を追加する</li>
<li>当然、今保存されているデータは引継がれることが前提</li>
</ul>


<h2>MagicalRecord</h2>

<p>セットアップ部分。<br/>
AppDelegate.m</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions:</span><span class="p">(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'>    <span class="c1">// .xcdatamodelがプロジェクト名と違うし、自動マイグレーションしてほしい（最初から設定済み）</span>
</span><span class='line'>    <span class="p">[</span><span class="n">MagicalRecord</span> <span class="nl">setupCoreDataStackWithAutoMigratingSqliteStoreNamed:</span><span class="s">@&quot;Model.sqlite&quot;</span><span class="p">];</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>どのセットアップメソッドを使用するか</h3>

<p>ここを参考：<a href="http://www.raywenderlich.com/56879/magicalrecord-tutorial-ios">http://www.raywenderlich.com/56879/magicalrecord-tutorial-ios</a></p>

<p>CoreDataを作成した際の <code>{任意の名前}.xcdatamodel</code> が、プロジェクト名と同じであれば</p>

<ul>
<li>setupCoreDataStack</li>
<li>setupCoreDataStackWithInMemoryStore</li>
<li>setupAutoMigratingCoreDataStack</li>
</ul>


<p>違うならば</p>

<ul>
<li>setupCoreDataStackWithStoreNamed:</li>
<li>setupCoreDataStackWithAutoMigratingSqliteStoreNamed:</li>
</ul>


<p><code>AutoMigrating</code> がついている方は、属性追加などをした際に可能であれば自動でマイグレーションしてくれる。</p>

<h2>Xcode</h2>

<h3>Modelのバージョンを追加</h3>

<p><code>{任意の名前}.xcdatamodel</code> を選択し、Editor &ndash;> Add Model Version&hellip;<br/>
<img src="http://mzgk.github.io/images/2014/0822/addmodelversion.png" alt="Model Version" /></p>

<p><img src="images/2014/0822/addModel2.png" alt="Model2" /></p>

<h3>新しく追加したModelに属性を追加</h3>

<p>新しく追加した方のモデル（Model2）に属性を追加する。</p>

<h3>Current Versionの変更</h3>

<ul>
<li>Model.xcdatamodeledを選択する</li>
<li>File inspectorを選択し、<code>Model Version -&gt; Current</code> で、追加した方（Model2）を選択する</li>
<li>Model2.xcdatamodeledにチェックマークがつく</li>
</ul>


<p><img src="http://mzgk.github.io/images/2014/0822/changeCurrent.png" alt="changeVersion" /></p>

<h2>属性名の変更など</h2>

<p>属性名の変更などについては、Lightweightマイグレーションという手法を使用するらしい（未検証）  。<br/>
また、マッピングモデルを使ったマイグレーションも存在するらしい（未検証）。</p>

<h2>参考</h2>

<ul>
<li><a href="http://www.raywenderlich.com/56879/magicalrecord-tutorial-ios">http://www.raywenderlich.com/56879/magicalrecord-tutorial-ios</a></li>
<li>iOS Core Data 徹底入門（10章）</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[キーボードの上に閉じるボタンを表示する（inputAccessoryView）]]></title>
    <link href="http://mzgk.github.io/blog/2014/keyboard-close-inputaccessoryview/"/>
    <updated>2014-08-21T15:03:05+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/keyboard-close-inputaccessoryview</id>
    <content type="html"><![CDATA[<p>UITextViewなどでキーボードを閉じたい時に、キーボードの上部に閉じるボタンを追加して閉じる方法。<br/>
inputAccessoryViewといって、キーボード上部にボタンなどを配置できる。<br/>
キーボードの表示／非表示に合わせて、表示／非表示される。</p>

<h2>生成</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="p">...</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// ボタンを配置するUIViewを作成（幅320／高さ44・背景色：透明）</span>
</span><span class='line'>    <span class="n">UIView</span><span class="o">*</span> <span class="n">accessoryView</span> <span class="o">=</span><span class="p">[[</span><span class="n">UIView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithFrame:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">320</span><span class="p">,</span> <span class="mi">44</span><span class="p">)];</span>
</span><span class='line'>    <span class="n">accessoryView</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="n">clearColor</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// ボタンを作成（accessoryView内で、X:270 Y:5 Width:40 Height:30にイメージ有りボタン）</span>
</span><span class='line'>    <span class="n">UIButton</span><span class="o">*</span> <span class="n">closeButton</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIButton</span> <span class="nl">buttonWithType:</span><span class="n">UIButtonTypeCustom</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">closeButton</span> <span class="nl">setImage:</span><span class="p">[</span><span class="n">UIImage</span> <span class="nl">imageNamed:</span><span class="s">@&quot;hideKeyboard&quot;</span><span class="p">]</span> <span class="nl">forState:</span><span class="n">UIControlStateNormal</span><span class="p">];</span>
</span><span class='line'>    <span class="n">closeButton</span><span class="p">.</span><span class="n">contentMode</span> <span class="o">=</span> <span class="n">UIViewContentModeScaleAspectFit</span><span class="p">;</span>
</span><span class='line'>    <span class="n">closeButton</span><span class="p">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">270</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">30</span><span class="p">);</span>
</span><span class='line'>    <span class="c1">// ボタンタップ時のメソッドを指定（closeKeyboard:　→　自作メソッド）</span>
</span><span class='line'>    <span class="p">[</span><span class="n">closeButton</span> <span class="nl">addTarget:</span><span class="n">self</span> <span class="nl">action:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">closeKeyboard:</span><span class="p">)</span> <span class="nl">forControlEvents:</span><span class="n">UIControlEventTouchUpInside</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// ボタンをViewに追加</span>
</span><span class='line'>    <span class="p">[</span><span class="n">accessoryView</span> <span class="nl">addSubview:</span><span class="n">closeButton</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// ビューをUITextFieldのinputAccessoryViewに設定</span>
</span><span class='line'>    <span class="n">_textView</span><span class="p">.</span><span class="n">inputAccessoryView</span> <span class="o">=</span> <span class="n">accessoryView</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>ボタンタップ時の処理</h2>

<p>Closeボタン実行時の処理も記述する。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">-</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">closeKeyboard:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">sender</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="nl">endEditing:</span><span class="n">YES</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>関連</h2>

<p>UITextView関連では、以下もあり。<br/>
<a href="http://mzgk.github.io/blog/2014/uiscrollview-tapevent/">http://mzgk.github.io/blog/2014/uiscrollview-tapevent/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[セルに追加したボタンの処理をViewControllerで行う]]></title>
    <link href="http://mzgk.github.io/blog/2014/handle-button-in-cell/"/>
    <updated>2014-08-14T20:11:37+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/handle-button-in-cell</id>
    <content type="html"><![CDATA[<p>カスタムセルに追加したボタンの処理を、ViewControllerで行う方法。<br/>
タップされたボタンのセルのインデックスの取得。</p>

<h2>Cell</h2>

<ol>
<li>StoryBoard上でセル内にボタンを追加する</li>
<li>Attribute inspector &ndash; view &ndash; Tag に値を設定する</li>
<li>Outlet接続のみ行う（不要かも）</li>
</ol>


<h2>ViewController</h2>

<h3>ボタンのプロパティを宣言</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">weak</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">UIButton</span> <span class="o">*</span><span class="n">button</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>ボタンとタップ時の処理を作成する</h3>

<p>任意の場所で。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// Cellにボタンを設定した時のTag値</span>
</span><span class='line'><span class="n">_button</span> <span class="o">=</span> <span class="p">(</span><span class="n">UIButton</span><span class="o">*</span><span class="p">)[</span><span class="n">cell</span> <span class="nl">viewWithTag:</span><span class="mi">1</span><span class="p">];</span>
</span><span class='line'><span class="c1">// ボタンのイベントを登録</span>
</span><span class='line'><span class="p">[</span><span class="n">_button</span> <span class="nl">addTarget:</span><span class="n">self</span> <span class="nl">action:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">buttonTapped:event:</span><span class="p">)</span> <span class="nl">forControlEvents:</span><span class="n">UIControlEventTouchUpInside</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<h3>タップ時の処理</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">buttonTapped:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">sender</span> <span class="nf">event:</span><span class="p">(</span><span class="n">UIEvent</span><span class="o">*</span><span class="p">)</span><span class="nv">event</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="c1">// タップされたボタンのセルインデックスを取得する</span>
</span><span class='line'>    <span class="n">UITouch</span> <span class="o">*</span><span class="n">touch</span> <span class="o">=</span> <span class="p">[[</span><span class="n">event</span> <span class="n">allTouches</span><span class="p">]</span><span class="n">anyObject</span><span class="p">];</span>
</span><span class='line'>    <span class="n">CGPoint</span> <span class="n">point</span> <span class="o">=</span> <span class="p">[</span><span class="n">touch</span> <span class="nl">locationInView:</span><span class="n">_sampleTableView</span><span class="p">];</span>
</span><span class='line'>    <span class="n">_tappedIndexPath</span> <span class="o">=</span> <span class="p">[</span><span class="n">_sampleTableView</span> <span class="nl">indexPathForRowAtPoint:</span><span class="n">point</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// 実行したい処理</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>参考</h2>

<ul>
<li><a href="http://cocoadays.blogspot.jp/2011/06/ios-uinib-uitableviewcell_26.html">http://cocoadays.blogspot.jp/2011/06/ios-uinib-uitableviewcell_26.html</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[指定したセルの表示更新を行う]]></title>
    <link href="http://mzgk.github.io/blog/2014/update-selected-cell/"/>
    <updated>2014-08-14T20:09:55+09:00</updated>
    <id>http://mzgk.github.io/blog/2014/update-selected-cell</id>
    <content type="html"><![CDATA[<p>特定のセルのみの表示更新を行いたい場合の方法。<br/>
以下のようなパターンで必要になった。</p>

<ol>
<li>セルをスワイプして削除ボタンを表示し、削除ボタンをタップ</li>
<li>セル内のデータに基づく内部データを処理（セル自体は削除したくない）</li>
<li>削除ボタンが消せない（reloadData）</li>
<li>セルのみ更新をしたい</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span> <span class="nf">commitEditingStyle:</span><span class="p">(</span><span class="n">UITableViewCellEditingStyle</span><span class="p">)</span><span class="nv">editingStyle</span> <span class="nf">forRowAtIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">editingStyle</span> <span class="o">==</span> <span class="n">UITableViewCellEditingStyleDelete</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">// セルの削除ボタンでしたい処理</span>
</span><span class='line'>        <span class="p">...</span>
</span><span class='line'>        <span class="c1">// 処理したセルの更新↓↓↓</span>
</span><span class='line'>        <span class="n">NSArray</span> <span class="o">*</span><span class="n">indexPaths</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSArray</span> <span class="nl">arrayWithObject:</span><span class="n">indexPath</span><span class="p">];</span>
</span><span class='line'>        <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="nl">reloadRowsAtIndexPaths:</span><span class="n">indexPaths</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationRight</span><span class="p">];</span>
</span><span class='line'>        <span class="c1">// ↑↑↑</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">editingStyle</span> <span class="o">==</span> <span class="n">UITableViewCellEditingStyleInsert</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>更新時のアニメーション</h2>

<ul>
<li>UITableViewRowAnimationFade</li>
<li>UITableViewRowAnimationRight</li>
<li>UITableViewRowAnimationLeft</li>
<li>UITableViewRowAnimationTop</li>
<li>UITableViewRowAnimationBottom</li>
<li>UITableViewRowAnimationNone</li>
<li>UITableViewRowAnimationMiddle</li>
</ul>

]]></content>
  </entry>
  
</feed>
